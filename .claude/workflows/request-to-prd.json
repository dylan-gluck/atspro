{
  "id": "request-to-prd",
  "name": "Feature Request to PRD",
  "description": "Transforms simple feature requests into comprehensive Product Requirements Documents",
  "version": "1.0.0",
  "steps": [
    {
      "id": "requirements_analysis",
      "name": "Requirements Analysis & Research",
      "agent": "doc-expert",
      "action": "analyze",
      "inputs": {
        "feature_request": "$FEATURE_REQUEST",
        "business_context": "$BUSINESS_CONTEXT"
      },
      "outputs": [
        "user_stories",
        "acceptance_criteria",
        "technical_requirements",
        "competitive_analysis"
      ],
      "memory_keys": [
        "user_stories",
        "acceptance_criteria",
        "technical_requirements"
      ]
    },
    {
      "id": "technical_feasibility",
      "name": "Technical Feasibility Assessment",
      "agent": "fullstack-eng",
      "action": "assess",
      "inputs": {
        "technical_requirements": "@memory:technical_requirements",
        "existing_architecture": "$CODEBASE_CONTEXT"
      },
      "outputs": [
        "feasibility_analysis",
        "implementation_approach",
        "effort_estimation",
        "risk_assessment"
      ],
      "memory_keys": [
        "feasibility_analysis",
        "implementation_approach",
        "effort_estimation"
      ]
    },
    {
      "id": "ux_specification",
      "name": "UX/UI Specification",
      "agent": "ux-eng",
      "action": "design",
      "inputs": {
        "user_stories": "@memory:user_stories",
        "acceptance_criteria": "@memory:acceptance_criteria"
      },
      "outputs": [
        "user_flows",
        "wireframes",
        "ui_components",
        "interaction_patterns"
      ],
      "memory_keys": [
        "user_flows",
        "ui_components"
      ]
    },
    {
      "id": "api_specification",
      "name": "API Design & Specification",
      "agent": "fullstack-eng",
      "action": "design_api",
      "inputs": {
        "technical_requirements": "@memory:technical_requirements",
        "implementation_approach": "@memory:implementation_approach"
      },
      "outputs": [
        "api_endpoints",
        "data_models",
        "authentication_flows",
        "error_handling"
      ],
      "memory_keys": [
        "api_endpoints",
        "data_models"
      ]
    },
    {
      "id": "testing_strategy",
      "name": "Testing Strategy Definition",
      "agent": "e2e-tester",
      "action": "plan_tests",
      "inputs": {
        "user_stories": "@memory:user_stories",
        "api_endpoints": "@memory:api_endpoints"
      },
      "outputs": [
        "test_scenarios",
        "test_data_requirements",
        "automation_strategy",
        "performance_criteria"
      ],
      "memory_keys": [
        "test_scenarios",
        "performance_criteria"
      ]
    },
    {
      "id": "prd_compilation",
      "name": "PRD Document Compilation",
      "agent": "doc-expert",
      "action": "compile",
      "inputs": {
        "user_stories": "@memory:user_stories",
        "acceptance_criteria": "@memory:acceptance_criteria",
        "feasibility_analysis": "@memory:feasibility_analysis",
        "effort_estimation": "@memory:effort_estimation",
        "user_flows": "@memory:user_flows",
        "api_endpoints": "@memory:api_endpoints",
        "test_scenarios": "@memory:test_scenarios"
      },
      "outputs": [
        "complete_prd",
        "implementation_roadmap",
        "success_metrics",
        "rollout_plan"
      ],
      "memory_keys": [
        "complete_prd",
        "implementation_roadmap"
      ]
    }
  ],
  "hooks": {
    "preWorkflow": "echo 'Starting PRD generation workflow'",
    "postStep": "echo 'Completed PRD step: $STEP_ID'",
    "postWorkflow": "echo 'PRD generation complete'"
  },
  "error_handling": {
    "retry_count": 2,
    "fallback_agent": "doc-expert",
    "notification": true
  },
  "parameters": {
    "FEATURE_REQUEST": {
      "type": "string",
      "required": true,
      "description": "The original feature request or idea"
    },
    "BUSINESS_CONTEXT": {
      "type": "string",
      "required": false,
      "description": "Additional business context or constraints"
    },
    "CODEBASE_CONTEXT": {
      "type": "string",
      "required": false,
      "description": "Current codebase architecture context"
    }
  },
  "deliverables": [
    "Complete Product Requirements Document",
    "User stories with acceptance criteria",
    "Technical feasibility assessment",
    "UX/UI specifications and wireframes",
    "API design documentation",
    "Testing strategy and scenarios",
    "Implementation roadmap with effort estimates"
  ]
}