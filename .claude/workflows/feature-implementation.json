{
  "id": "feature-implementation",
  "name": "Full Stack Feature Implementation",
  "description": "Implements a complete feature across frontend and backend with testing",
  "version": "2.0.0",
  "context_system": "json",
  "steps": [
    {
      "id": "research",
      "name": "Research & Documentation",
      "agent": "doc-expert",
      "action": "research",
      "inputs": {
        "requirements": "$FEATURE_REQUIREMENTS",
        "scope": "$FEATURE_SCOPE"
      },
      "outputs": [
        "technical_spec",
        "dependencies",
        "api_contracts",
        "ui_mockups"
      ],
      "context_keys": [
        "feature_spec",
        "dependencies",
        "api_contracts"
      ],
      "context_operations": [
        {
          "action": "store",
          "key": "feature_spec",
          "source": "research_output.technical_spec"
        },
        {
          "action": "store", 
          "key": "dependencies",
          "source": "research_output.dependencies"
        }
      ]
    },
    {
      "id": "implementation",
      "name": "Full Stack Implementation",
      "agent": "fullstack-eng",
      "action": "implement",
      "inputs": {
        "spec": "@context:feature_spec",
        "dependencies": "@context:dependencies"
      },
      "outputs": [
        "backend_code",
        "frontend_code",
        "migration_scripts"
      ],
      "context_keys": [
        "implementation_details",
        "api_endpoints"
      ],
      "context_operations": [
        {
          "action": "store",
          "key": "implementation_details",
          "source": "agent_results.summary"
        },
        {
          "action": "store",
          "key": "api_endpoints", 
          "source": "implementation_output.api_endpoints"
        }
      ]
    },
    {
      "id": "testing",
      "name": "End-to-End Testing",
      "agent": "e2e-tester",
      "action": "test",
      "inputs": {
        "implementation": "@context:implementation_details",
        "endpoints": "@context:api_endpoints"
      },
      "outputs": [
        "test_results",
        "screenshots",
        "coverage_report"
      ],
      "context_keys": [
        "test_results"
      ],
      "context_operations": [
        {
          "action": "store",
          "key": "test_results",
          "source": "agent_results.findings"
        }
      ]
    },
    {
      "id": "review",
      "name": "Code Review",
      "agent": "code-review",
      "action": "review",
      "inputs": {
        "implementation": "@context:implementation_details",
        "test_results": "@context:test_results"
      },
      "outputs": [
        "review_feedback",
        "suggestions",
        "approval_status"
      ],
      "context_keys": [
        "review_feedback"
      ],
      "context_operations": [
        {
          "action": "store",
          "key": "review_feedback",
          "source": "agent_results.findings"
        }
      ]
    }
  ],
  "hooks": {
    "preWorkflow": "source .claude/lib/context.sh && start_workflow feature-implementation 'Full Stack Feature Implementation' 4",
    "postStep": "source .claude/lib/context.sh && increment_metric workflowSteps 1",
    "postWorkflow": "source .claude/lib/context.sh && update_workflow feature-implementation completed 4"
  },
  "error_handling": {
    "retry_count": 2,
    "fallback_agent": "fullstack-eng",
    "notification": true,
    "error_context": true
  },
  "context_schema": {
    "feature_spec": {
      "type": "object",
      "description": "Technical specification from research phase"
    },
    "dependencies": {
      "type": "array",
      "description": "Required dependencies and libraries"
    },
    "implementation_details": {
      "type": "string", 
      "description": "Summary of implementation work completed"
    },
    "api_endpoints": {
      "type": "array",
      "description": "List of API endpoints created/modified"
    },
    "test_results": {
      "type": "array",
      "description": "Test results and coverage data"
    },
    "review_feedback": {
      "type": "array",
      "description": "Code review findings and suggestions"
    }
  }
}